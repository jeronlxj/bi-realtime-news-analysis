# Configure source, channel, and sink for the exposure logs agent
exposure_logs_agent.sources = fileSource
exposure_logs_agent.channels = memoryChannel
exposure_logs_agent.sinks = kafkaSink

# Source configuration - monitors the exposure logs file
exposure_logs_agent.sources.fileSource.type = exec
exposure_logs_agent.sources.fileSource.command = tail -F exposure_logs.json
exposure_logs_agent.sources.fileSource.channels = memoryChannel
exposure_logs_agent.sources.fileSource.restart = true
exposure_logs_agent.sources.fileSource.restartThrottle = 10000

# Channel configuration - memory channel for better performance
exposure_logs_agent.channels.memoryChannel.type = memory
exposure_logs_agent.channels.memoryChannel.capacity = 100000
exposure_logs_agent.channels.memoryChannel.transactionCapacity = 1000

# Sink configuration - sends data to Kafka
exposure_logs_agent.sinks.kafkaSink.type = org.apache.flume.sink.kafka.KafkaSink
exposure_logs_agent.sinks.kafkaSink.kafka.topic = news_exposure_logs
exposure_logs_agent.sinks.kafkaSink.kafka.bootstrap.servers = localhost:9092
exposure_logs_agent.sinks.kafkaSink.channel = memoryChannel
exposure_logs_agent.sinks.kafkaSink.kafka.producer.acks = 1