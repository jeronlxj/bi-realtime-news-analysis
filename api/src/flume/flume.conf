# Configure source, channel, and sink for the exposure logs agent
exposure_logs_agent.sources = fileSource
exposure_logs_agent.channels = memoryChannel
exposure_logs_agent.sinks = kafkaSink

# Source configuration - monitors the exposure logs directory
exposure_logs_agent.sources.fileSource.type = spooldir
exposure_logs_agent.sources.fileSource.spoolDir = /opt/flume/data/logs
exposure_logs_agent.sources.fileSource.channels = memoryChannel
exposure_logs_agent.sources.fileSource.fileHeader = true
exposure_logs_agent.sources.fileSource.deletePolicy = immediate

# Channel configuration - memory channel for better performance
exposure_logs_agent.channels.memoryChannel.type = memory
exposure_logs_agent.channels.memoryChannel.capacity = 100000
exposure_logs_agent.channels.memoryChannel.transactionCapacity = 1000

# Sink configuration - sends data to Kafka
exposure_logs_agent.sinks.kafkaSink.type = org.apache.flume.sink.kafka.KafkaSink
exposure_logs_agent.sinks.kafkaSink.kafka.topic = news_exposure_logs
exposure_logs_agent.sinks.kafkaSink.kafka.bootstrap.servers = localhost:9092
exposure_logs_agent.sinks.kafkaSink.channel = memoryChannel
exposure_logs_agent.sinks.kafkaSink.kafka.producer.acks = 1